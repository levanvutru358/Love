@font-face {
  font-family: system-ui;
  src: local("Segoe UI"), local("Roboto"), local("Helvetica Neue"), local("Noto Sans"), local("Arial");
}

:root {
  --bg: #060814;
  --bg-2: #0b0f20;
  --text: #e9ecf1;
  --muted: #b8c0d6;
  --accent: #ff7bd1;
  --glow: #8ee7ff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: radial-gradient(1200px 600px at 50% -20%, #142045 0%, var(--bg) 60%) fixed;
  overflow: hidden;
}

#app, .screen {
  width: 100vw;
  height: 100vh;
}

.screen {
  display: none;
  position: relative;
  align-items: center;
  justify-content: center;
  padding: 24px;
}
.screen.active { display: flex; animation: fadeIn 600ms ease forwards; }

@keyframes fadeIn {
  from { opacity: 0 } to { opacity: 1 }
}

/* Screen 1: Card */
/* Screen 1 stars layer */
#screen-1 .stars {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}
#screen-1 .stars .star {
  position: absolute;
  width: 2px;
  height: 2px;
  border-radius: 50%;
  left: var(--x);
  top: var(--y);
  transform: scale(var(--s, 1));
  background: radial-gradient(circle, rgba(255,255,255,0.95), rgba(255,255,255,0) 60%);
  filter: drop-shadow(0 0 6px rgba(180,210,255,0.7));
  opacity: 0.8;
  animation:
    twinkle var(--dur, 3s) ease-in-out infinite var(--delay, 0s),
    floatStar calc(var(--dur, 3s) * 1.5) ease-in-out infinite var(--delay, 0s);
}

@keyframes twinkle {
  0%, 100% { opacity: 0.22 }
  50% { opacity: 1 }
}
@keyframes floatStar {
  0% { transform: translateY(0) scale(var(--s, 1)); }
  50% { transform: translateY(-2px) scale(var(--s, 1)); }
  100% { transform: translateY(0) scale(var(--s, 1)); }
}

/* Card 3D deluxe */
.card {
  width: min(88vw, 560px);
  height: min(70vh, 360px);
  perspective: 1400px;
  position: relative;
  cursor: pointer;
  z-index: 1;
}

.card::before,
.card::after {
  content: "";
  position: absolute;
  inset: -14px;
  border-radius: 26px;
  background: radial-gradient(120px 60px at 15% 10%, rgba(255,180,240,0.22), transparent 60%),
              radial-gradient(120px 60px at 85% 90%, rgba(140,220,255,0.22), transparent 60%);
  filter: blur(16px);
  z-index: -1;
}
.card::after { inset: -6px; filter: blur(8px); opacity: 0.8; }

.card-scene {
  position: relative;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
}

.card-cover, .card-page {
  position: absolute;
  inset: 0;
  border-radius: 20px;
}

.card-page {
  background: linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.16);
  box-shadow: 0 20px 60px rgba(0,0,0,0.35), inset 0 0 40px rgba(120, 200, 255, 0.12);
  display: grid;
  place-items: center;
}
.page-content { text-align: center; padding: 24px; }
.page-title { font-size: clamp(22px, 3.6vw, 30px); font-weight: 700; }
.page-sub { color: var(--muted); margin-top: 8px; }

.card-cover {
  transform-origin: left center;
  transform: rotateY(0deg) translateZ(1px);
  background: linear-gradient(160deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: 0 26px 80px rgba(80, 180, 255, 0.30), 0 8px 30px rgba(0,0,0,0.35), inset 0 0 50px rgba(150, 220, 255, 0.18);
  overflow: hidden;
}

/* Subtle gilded border */
.card-cover::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 20px;
  padding: 1px;
  background: linear-gradient(135deg, rgba(255,200,220,0.85), rgba(160,220,255,0.85), rgba(255,235,190,0.9));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.75;
}

.foil {
  position: absolute; inset: 0;
  background:
    conic-gradient(from 0deg, rgba(255,160,220,0.25), rgba(140,220,255,0.22), rgba(255,230,180,0.25), rgba(180,200,255,0.22), rgba(255,160,220,0.25))
    , linear-gradient(120deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02));
  mix-blend-mode: screen;
  animation: foilShift 6s linear infinite;
  pointer-events: none;
}

@keyframes foilShift { to { transform: rotate(360deg); } }

.card-cover::after {
  content: "";
  position: absolute; inset: -40%;
  background: linear-gradient(120deg, rgba(255,255,255,0.0) 40%, rgba(255,255,255,0.85) 50%, rgba(255,255,255,0.0) 60%);
  transform: translateX(-120%) rotate(8deg);
  animation: sweep 3.4s ease-in-out infinite;
  pointer-events: none;
}

@keyframes sweep {
  0% { transform: translateX(-120%) rotate(8deg); }
  45% { transform: translateX(140%) rotate(8deg); }
  100% { transform: translateX(140%) rotate(8deg); }
}

.cover-content {
  position: relative;
  inset: 0;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  text-align: center;
  padding: 24px;
}
.cover-title {
  font-size: clamp(28px, 5vw, 42px);
  font-weight: 900;
  letter-spacing: 0.6px;
  text-shadow: 0 2px 14px rgba(255, 170, 230, 0.45);
}
.cover-sub { margin-top: 10px; color: var(--muted); }

/* Open state */
.card.open .card-cover { transition: transform 1s cubic-bezier(.18,.72,.19,1); transform: rotateY(-160deg) translateZ(1px); }
.card:not(.open) .card-cover { transition: transform 600ms cubic-bezier(.2,.6,.2,1); }

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .card.open .card-cover, .card:not(.open) .card-cover { transition: none; }
  .foil, .card-cover::after { animation: none; }
}

/* Screen 2: Message */
.message {
  max-width: 760px;
  text-align: center;
  line-height: 1.6;
}
.message h1 {
  margin: 0 0 12px;
  font-size: clamp(28px, 5vw, 42px);
  text-shadow: 0 6px 26px rgba(255, 200, 250, 0.25);
}
.message p {
  margin: 0;
  color: var(--muted);
  font-size: clamp(16px, 2.7vw, 20px);
}

/* Overlays for animated screens */
.overlay-title {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-weight: 700;
  letter-spacing: 0.3px;
  text-shadow: 0 2px 18px rgba(142, 231, 255, 0.4);
  pointer-events: none;
  z-index: 2;
}

.hint {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  color: #cfd6f3;
  opacity: 0.9;
  font-size: 14px;
  letter-spacing: 0.3px;
  background: rgba(10, 14, 32, 0.45);
  border: 1px solid rgba(255,255,255,0.12);
  padding: 6px 12px;
  border-radius: 999px;
  box-shadow: 0 6px 24px rgba(0,0,0,0.25);
  z-index: 2;
}

/* Canvases */
canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce) {
  .screen.active { animation: none; }
}
